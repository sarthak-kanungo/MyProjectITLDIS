<div [formGroup]="jobCardForm" [style.fontSize.px]="11" class="container-fluid mt-2 pb_0">
  <div class="row pb_0">
    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Chassis No.</mat-label>
        <input matInput placeholder="Chassis No." formControlName="chassisNo" [matAutocomplete]="autoChassisNo">
        <mat-autocomplete #autoChassisNo="matAutocomplete" [panelWidth]="500">
          <mat-option *ngFor="let option of kaiChassisNoList " [value]="option.code">
            {{option?.value}}
          </mat-option>
        </mat-autocomplete>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Job Card No.</mat-label>
        <input matInput placeholder="Job Card No." formControlName="jobCardNo" [matAutocomplete]="autoJobCardNo">
        <mat-autocomplete #autoJobCardNo="matAutocomplete" [panelWidth]="500">
          <mat-option *ngFor="let option of kaiJobCardNoList " [value]="option.code">
            {{option?.value}}
          </mat-option>
        </mat-autocomplete>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Engine No.</mat-label>
        <input matInput placeholder="Engine No." formControlName="engineNo" [matAutocomplete]="autoEngineNo">
        <mat-autocomplete #autoEngineNo="matAutocomplete" [panelWidth]="500">
          <mat-option *ngFor="let option of kaiEngineNoList " [value]="option.code">
            {{option?.value}}
          </mat-option>
        </mat-autocomplete>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Part No.</mat-label>
        <input matInput placeholder="Part No." formControlName="partNo" [matAutocomplete]="autoPartNo">
        <mat-autocomplete #autoPartNo="matAutocomplete" [panelWidth]="500">
          <mat-option *ngFor="let option of PartNoList " [value]="option.partNumber">
            {{option?.itemNo}}
          </mat-option>
        </mat-autocomplete>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div> 

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Booking No.</mat-label>
        <input matInput placeholder="Booking No." formControlName="bookingNo" [matAutocomplete]="autoBookingNo">
        <mat-autocomplete #autoBookingNo="matAutocomplete" [panelWidth]="500">
          <mat-option *ngFor="let option of kaiBookingNoList " [value]="option.code">
            {{option?.value}}
          </mat-option>
        </mat-autocomplete>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <input matInput [matDatepicker]="picker" readonly placeholder="Job Card Date From"
          formControlName="jobCardDateFrom" (click)="picker.open()" [max]="newdate" (dateChange)="setToDate($event)">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <input matInput [matDatepicker]="picker1" readonly placeholder="Job Card Date To"
          formControlName="jobCardDateTo" (click)="picker1.open()"  [max]="maxDate" [min]="minDate">
        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
        <mat-datepicker #picker1></mat-datepicker>
      </mat-form-field>
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Status</mat-label>
        <mat-select formControlName="status">
          <mat-option *ngFor="let option of statusList" [value]="option">{{option}}
          </mat-option>
        </mat-select>
      </mat-form-field>  
    </div>

    <div class="col-lg-2">
      <mat-form-field class="w-100" appearance="outline">
        <mat-label>Excel View</mat-label>
        <mat-select formControlName="excelView">
          <mat-option *ngFor="let option of excelViewList" [value]="option.value">{{option.viewValue}}
          </mat-option>
        </mat-select>
        <mat-error *ngIf="jobCardForm.get('excelView').hasError('jcExcelError')">
          Please Select  Excel View First</mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="card-from mt-2" *ngIf="searchform">
    <div class="card" style="border: 1px solid #45afaf;">
        <div class="card-header" style="background-color: #45afaf;
                border: 1px solid #45afaf;">
            <p class="mb-0" style="font-size: 13px;"> Advance Search</p>
        </div>
        <div class="card-body">
            <div class="row">
              
              <div class="col-lg-2">
                <mat-form-field class="w-100" appearance="outline">
                  <input matInput [matDatepicker]="picker3" readonly placeholder="From Machine In Date"
                    formControlName="fromMachineInDate" (click)="picker3.open()" [max]="newdate" (dateChange)="setToDate($event)">
                  <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                  <mat-datepicker #picker3></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="col-lg-2">
                <mat-form-field class="w-100" appearance="outline">
                  <input matInput [matDatepicker]="picker4" readonly placeholder="To Machine In Date"
                    formControlName="toMachineInDate" (click)="picker4.open()"  [max]="maxDate" [min]="minDate">
                  <mat-datepicker-toggle matSuffix [for]="picker4"></mat-datepicker-toggle>
                  <mat-datepicker #picker4></mat-datepicker>
                </mat-form-field>
              </div>
              
                <div class="col-lg-2" *ngIf='isKai'>
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Dealer Ship</mat-label>
                      <input matInput placeholder="Dealer Ship" formControlName="dealerShip"
                          [matAutocomplete]="autoDealercode">
                      <mat-autocomplete #autoDealercode="matAutocomplete" [panelWidth]="500" [displayWith]="displayDealerCodeFn" (optionSelected)="dealerSelect($event)">
                          <mat-option *ngFor="let option of dealercodeList?.result" [value]="option">
                              {{option?.displayString}}
                          </mat-option>
                      </mat-autocomplete>

                      <mat-icon matSuffix>search</mat-icon>
                  </mat-form-field>
              </div>
              
              <div class="col-lg-2">
                <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Branch</mat-label>
                    <mat-select formControlName="branch">
                        <mat-option *ngFor="let option of branches" [value]="option.BRANCH_ID">
                            {{option?.branchcode}} - {{option?.BranchName}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
              </div>


                <div class="col-lg-2">
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Product</mat-label>
                      <mat-select formControlName="product"
                          (selectionChange)="selectProduct($event.value)">
                          <mat-option *ngFor="let option of products" [value]="option.product">
                              {{option?.product}}
                          </mat-option>
                      </mat-select>
                  </mat-form-field>
              </div>
               <div class="col-lg-2">
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Series</mat-label>
                      <mat-select formControlName="series"
                          (selectionChange)="selectSeries($event.value)" [compareWith]="compareFnSeries">
                          <mat-option *ngFor="let option of seriesByProduct"
                              [value]="option.series">{{option?.series}}
                          </mat-option>
                      </mat-select>
                  </mat-form-field>
              </div>
              <div class="col-lg-2">
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Model</mat-label>
                      <mat-select formControlName="model"
                          (selectionChange)="selectModel($event.value)" [compareWith]="compareFnModel">
                          <mat-option *ngFor="let option of modelBySeries"
                              [value]="option.model">
                              {{option?.model}}
                          </mat-option>
                      </mat-select>
                  </mat-form-field>
              </div>
              <div class="col-lg-2">
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Sub Model</mat-label>
                      <mat-select formControlName="subModel" (selectionChange)="selectSubModel($event.value)"
                          [compareWith]="compareFnSubModel">
                          <mat-option *ngFor="let option of subModelByModel"
                              [value]="option.subModel">
                              {{option?.subModel}}</mat-option>
                      </mat-select>
                  </mat-form-field>
              </div>
              <div class="col-lg-2">
                  <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Variant</mat-label>
                      <mat-select formControlName="variant">
                          <mat-option *ngFor="let option of variants" [value]="option.variant">
                              {{option?.variant}}
                          </mat-option>
                      </mat-select>
                  </mat-form-field>
              </div> 
            </div>
            <div class="row" >
              <div class="col-lg-2" *ngFor="let level of orgLevels">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>{{level['LEVEL_DESC']}}</mat-label>
                  <mat-select formControlName="orgHierLevel1" *ngIf="level['SEQ_NO'] == 1">
                    <mat-option value='all' (click)="getOrgLevelHier2('all')">ALL</mat-option>
                    <mat-option *ngFor="let hier of orgHierLevels1" [value]="hier" (click)="getOrgLevelHier2(hier)" >{{hier['hierarchy_desc']}}</mat-option>
                  </mat-select>
                  <mat-select formControlName="orgHierLevel2" *ngIf="level['SEQ_NO'] == 2">
                    <mat-option value='all' (click)="getOrgLevelHier3('all')">ALL</mat-option>
                    <mat-option *ngFor="let hier of orgHierLevels2" [value]="hier" (click)='getOrgLevelHier3(hier)' >{{hier['hierarchy_desc']}}</mat-option>
                  </mat-select>
                  <mat-select formControlName="orgHierLevel3" *ngIf="level['SEQ_NO'] == 3">
                    <mat-option value='all' (click)="getOrgLevelHier4('all')">ALL</mat-option>
                    <mat-option *ngFor="let hier of orgHierLevels3" [value]="hier" (click)='getOrgLevelHier4(hier)' >{{hier['hierarchy_desc']}}</mat-option>
                  </mat-select>
                  <mat-select formControlName="orgHierLevel4" *ngIf="level['SEQ_NO'] == 4">
                    <mat-option value='all' (click)="getOrgLevelHier5('all')">ALL</mat-option>
                    <mat-option *ngFor="let hier of orgHierLevels4" [value]="hier" (click)='getOrgLevelHier5(hier)' >{{hier['hierarchy_desc']}}</mat-option>
                  </mat-select>
                  <mat-select formControlName="orgHierLevel5" *ngIf="level['SEQ_NO'] == 5">
                    <mat-option value='all' (click)="getOrgLevelHier6('all')">ALL</mat-option>
                    <mat-option *ngFor="let hier of orgHierLevels5" [value]="hier" >{{hier['hierarchy_desc']}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
            </div>
        </div>
    </div>
  </div>
  <div class="col-lg-12">
    <div class="mx-auto d-flex justify-content-between">
        <div></div>
        <a class=" font-weight-bold mt-3" style="color: #007bff;cursor: pointer;"(click)="searchform = !searchform">
            <u> {{searchform ? 'Hide Advance Search Filters' : 'Advance Search'}}</u>
        </a>
    </div>
  </div>
</div>