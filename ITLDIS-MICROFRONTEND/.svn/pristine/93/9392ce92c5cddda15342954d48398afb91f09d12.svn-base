{"version":3,"file":"editable-table.js","sources":["ng://editable-table/lib/et-data-handler.service.ts","ng://editable-table/lib/et-form-handler.service.ts","ng://editable-table/lib/editable-table-config.ts","ng://editable-table/lib/editable-table.component.ts","ng://editable-table/lib/editable-table.module.ts"],"sourcesContent":["import { Injectable, EventEmitter } from '@angular/core';\nimport { Subject, Observable, Subscriber } from 'rxjs';\nimport { ColumnRecord } from './editable-table-config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EtDataHandlerService {\n\n  private sendColumnNameRecord: Subscriber<string>;\n  public sendColumnNameRecord$ = new Subject<string>();\n  public sendColumnRecord$ = new Subject<ColumnRecord>();\n  private validateTable$ = new EventEmitter<boolean>();\n  private getTableRecord$ = new EventEmitter<object>();\n  private getColumnNameToCollectColumnRecord$ = new Observable<string>(subscriber => {\n    this.sendColumnNameRecord = subscriber;\n  });\n  private sendColumnRecord: Subscriber<any>;\n  constructor() { }\n\n  getColumnRecord(formControlName: string) {\n    // console.log('formControlName', formControlName);\n    this.sendColumnNameRecord$.next(formControlName);\n    // return this.sendColumnRecord$;\n  }\n  getColumnNameToCollectColumnRecord() {\n    return new Observable<string>(subscriber => {\n      this.sendColumnNameRecord = subscriber;\n    });\n  }\n  emitColumnRecord(columnRecordList: Array<any>, formControlName: string) {\n    // console.log('columnRecordList', columnRecordList);\n    setTimeout(() => {\n      this.sendColumnRecord$.next({ recordList: columnRecordList, formControlName });\n    }, 1);\n  }\n  validateTable() {\n    return this.validateTable$;\n  }\n  getValidTableRecord(): EventEmitter<object> {\n    this.validateTable$.emit(true);\n    return this.getTableRecord$;\n  }\n  sendTableRecord(record: object) {\n    setTimeout(() => {\n      this.getTableRecord$.emit(record);\n    }, 100);\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EtFormHandlerService {\n\n  constructor() { }\n\n  setValidators(validateFn) {\n\n  }\n}\n","\nexport interface TableConfig {\n    title: string;\n    formControlName: string;\n    key?: string;\n    inputField: string;\n    isNeedValueChanges?: boolean;\n    displayKey?: string;\n    patchKey?: string;\n}\n\nexport interface PatchValue {\n    rowIndex: number;\n    patchValue: object;\n    tableRowId?: string;\n}\nexport interface AssignListToSelect {\n    formControlName: string;\n    list: Array<object>\n}\nexport interface AssignListToAutocomplete {\n    config: TableConfig;\n    list: Array<object>;\n    searchKey?: string;\n}\nexport interface ControlsConfig {\n    [key: string]: any;\n}\nexport interface ColumnRecord {\n    recordList: Array<string>;\n    formControlName: string;\n}\n\nexport interface EtTableValueChangeEvent<T> {\n    key: any;\n    config: TableConfig;\n    tableRow: T;\n}\nexport interface EtAutocompleteSelectedEvent<T> {\n    option: any;\n    rowIndex: number;\n    config: TableConfig;\n    tableRow: T;\n}\nexport class ETValidationError {\n    readonly isRemove: boolean;\n    constructor(\n        readonly formControlName: string,\n        readonly tableRowId: string,\n        readonly msg?: string,\n        readonly type?: { [key: string]: any }\n    ) {\n        if (!msg) {\n            this.isRemove = true;\n        }\n        Object.seal(this);\n    }\n}","import { Component, OnInit, Input, AfterViewInit, Output, EventEmitter, OnChanges, SimpleChanges, forwardRef, OnDestroy, ChangeDetectorRef } from '@angular/core';\nimport { FormArray, Validators, FormBuilder, FormGroup, ControlValueAccessor, Validator, NG_VALUE_ACCESSOR, NG_VALIDATORS, AbstractControl, ValidationErrors, FormControl } from '@angular/forms';\nimport { of, Observable, Subject, Subscription, BehaviorSubject } from 'rxjs';\nimport { map, startWith } from 'rxjs/operators';\nimport { TableConfig, PatchValue, EtTableValueChangeEvent, EtAutocompleteSelectedEvent, ETValidationError } from './editable-table-config';\nimport { MatAutocompleteSelectedEvent } from '@angular/material/autocomplete';\nimport * as uuid from 'uuid';\nimport { EtDataHandlerService } from './et-data-handler.service';\n\n\n@Component({\n  selector: 'editable-table',\n  templateUrl: './editable-table.component.html',\n  styleUrls: ['./editable-table.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => EditableTableComponent),\n      multi: true\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => EditableTableComponent),\n      multi: true\n    }\n  ]\n})\nexport class EditableTableComponent implements OnInit, OnDestroy, OnChanges, ControlValueAccessor, Validator {\n  editableTableForm: FormGroup\n  isEdit: boolean;\n  isView: boolean;\n  filteredOptions = {};\n  selectOptions = {};\n  subscription = new Subscription();\n  @Input() viewOnly = false;\n  @Input() hideActionBtn = false;\n  @Input() hideDefaultRow: boolean = false;\n  @Input()\n  set assignListToSelect(v) {\n    if (!!v) {\n      v.forEach(ele => {\n        this.selectOptions[ele.formControlName] = ele.list;\n      });\n    }\n  }\n  @Input()\n  tableConfig = [] as Array<TableConfig>;\n  @Input() set getFormData(v) {\n    v.subscribe(res => {\n      if (!!res) {\n        this.getTableRecordChange.emit((this.editableTableForm.controls.table as FormArray).getRawValue());\n      }\n    });\n  }\n  @Output() getTableRecordChange = new EventEmitter<object>();\n  @Output() optionSelected = new EventEmitter<EtAutocompleteSelectedEvent<object>>();\n  @Input()\n  set assignListToAutocomplete(v) {\n    if (v && v.config.inputField === 'autocomplete') {\n      this.filteredOptions[v.config.formControlName] = this._filter(v.searchKey, v.list, v.config.displayKey)\n    }\n  }\n  private _patchValue: Array<PatchValue>;\n  @Input() set patchValue(v: Array<PatchValue>) {\n    this._patchValue = v;\n  }\n  @Input() set patchValueToSelect(v: Array<PatchValue>) {\n    if (!!v && this.editableTableForm) {\n      let form = (this.editableTableForm.controls.table as FormArray)\n      v.forEach(ele => {\n        if (form.controls[ele.rowIndex]) {\n          form.controls[ele.rowIndex].patchValue(ele.patchValue);\n        }\n      });\n    }\n  }\n  private dirtyAutocompleteColumn: TableConfig;\n  private _tableData;\n  @Input('tableData')\n  public set tableData(v) {\n    {\n      if (!!v && v.length > 0) {\n        this._tableData = v;\n        this.createTableWithData(v)\n      }\n    }\n  }\n  private _formGroupForTableRow;\n  @Output() searchValueChanges = new EventEmitter<EtTableValueChangeEvent<object>>();\n  @Output() tableValueChanges = new EventEmitter<object>();\n  @Input() public set formGroupForTableRow(fb) {\n    this._formGroupForTableRow = { ...fb };\n  }\n  @Output() deletedTableRecords = new EventEmitter<Array<object>>();\n  @Input() matAutocompleteDisplayFn = new Subject();\n  @Input() etFormArray: FormArray;\n  @Input() control: FormControl;\n  private _validationError: ETValidationError;\n  /** \n   * bind instaceof @param ETValidationError\n   * \n  */\n  @Input() public set validationError(ve: ETValidationError) {\n    if (ve) {\n      this._validationError = ve;\n      this.setError(ve)\n    }\n  }\n\n  constructor(\n    private fb: FormBuilder,\n    private etDataHandlerService: EtDataHandlerService,\n    private _changeDetectorRef: ChangeDetectorRef,\n  ) { }\n\n  ngOnInit() {\n    this.createTableForm();\n    this.subscribeToSendColumnNameRecord();\n    this.subscribeToValidateTable();\n    this.assignMarkAsTouchedFnToControl(this.control);\n    // this.setQuotationListToTable();\n  }\n  ngOnChanges(changes: SimpleChanges): void {\n    if (!!changes.patchValue && !!changes.patchValue.currentValue) {\n      this._patchValue = changes.patchValue.currentValue;\n      this.patchValueToTable(this._patchValue);\n    }\n    if (!!changes.control && !!changes.control.currentValue) {\n      this.assignMarkAsTouchedFnToControl(this.control);\n    }\n  }\n  assignMarkAsTouchedFnToControl(control: AbstractControl) {\n    if (control) {\n      control.markAsTouched = () => {\n        this.editableTableForm.markAllAsTouched();\n      };\n    }\n  }\n\n  private patchValueToTable(v) {\n    if (!!v && v.length > 0) {\n      if (!this.editableTableForm) {\n        this.createTableForm();\n      }\n      let form = (this.editableTableForm.controls.table as FormArray)\n      let rowIndex;\n      v.forEach(ele => {\n        if (ele.tableRowId) {\n          for (const key in form.value) {\n            if (form.value.hasOwnProperty(key)) {\n              const tableRow = form.value[key];\n              if (tableRow['tableRowId'] === ele.tableRowId) {\n                rowIndex = key;\n              }\n            }\n          }\n        }\n        rowIndex = (!rowIndex && ele.rowIndex) ? ele.rowIndex : rowIndex;\n        rowIndex ? form.controls[rowIndex].patchValue(ele.patchValue) : console.error('patch row undefined');\n      });\n    }\n  }\n  private createTableWithData(tableData) {\n    if (!this.editableTableForm) {\n      return;\n    }\n    const table = this.editableTableForm.get('table') as FormArray;\n    if (table.length > 1) {\n      table.clear();\n    }\n    tableData.forEach((element, index) => {\n      if (index === 0 && table.length > 0) {\n        this.patchValueToTable([{ rowIndex: '0', patchValue: element }]);\n        return;\n      }\n      this.addRow(element);\n    });\n  }\n  // @Input() private tableData;\n  private subscribeToSendColumnNameRecord() {\n    this.etDataHandlerService.sendColumnNameRecord$.subscribe((formControlName) => {\n      if (this.viewOnly) {\n        return;\n      }\n      let form = (this.editableTableForm.controls.table as FormArray);\n      let columnValues = [];\n      const tableRecord = form.getRawValue();\n      if (formControlName.toLowerCase() === 'all') {\n        let sortedConfigList = this.tableConfig.filter(config => config.isNeedValueChanges);\n        sortedConfigList.forEach((config) => {\n          columnValues = this.collectColumnRecord(tableRecord, config.formControlName)\n          this.etDataHandlerService.emitColumnRecord(columnValues, config.formControlName);\n        });\n        return;\n      }\n      columnValues = this.collectColumnRecord(tableRecord, formControlName)\n      this.etDataHandlerService.emitColumnRecord(columnValues, formControlName);\n    });\n  }\n  private collectColumnRecord(tableRecord: Array<object>, tableRowKey: string) {\n    let columnValues = []\n    for (const key in tableRecord) {\n      if (tableRecord.hasOwnProperty(key)) {\n        const tableRow = tableRecord[key];\n        columnValues.push(tableRow[tableRowKey])\n      }\n    }\n    return columnValues;\n  }\n  private subscribeToValidateTable() {\n    const validateSbscrb = this.etDataHandlerService.validateTable().subscribe(status => {\n      if (status) {\n        this.editableTableForm.markAllAsTouched();\n        if (this.editableTableForm.status === 'VALID' || this.editableTableForm.status === 'DISABLED') {\n          this.etDataHandlerService.sendTableRecord({\n            data: (this.editableTableForm.controls.table as FormArray).getRawValue(),\n            valid: true\n          });\n          return;\n        }\n        this.etDataHandlerService.sendTableRecord({\n          data: [],\n          valid: false\n        });\n      }\n    });\n    this.subscription.add(validateSbscrb);\n  }\n  createTableForm() {\n    if (this.editableTableForm) {\n      return;\n    }\n    if (this.etFormArray) {\n      this.editableTableForm = this.fb.group({\n        table: this.etFormArray\n      });\n    } else {\n      this.editableTableForm = this.fb.group({\n        table: this.fb.array([])\n      });\n    }\n    if (\n      !this.hideDefaultRow\n      && (this.editableTableForm.controls.table as FormArray).length === 0\n      && (this.tableConfig.length > 0 || this.etFormArray.length > 0)\n    ) {\n      this.addRow();\n    }\n    this.tableValueChanges.emit(this.editableTableForm.valueChanges);\n    if (this._tableData) {\n      this.createTableWithData(this._tableData);\n    }\n  }\n  implementsDetailsRow(data?: object) {\n    const fg = this.fb.group(this._formGroupForTableRow);\n    console.log('this._formGroupForTableRow: ', this._formGroupForTableRow);\n\n    if (!!data && !this.viewOnly) {\n      fg.patchValue(data);\n    }\n    if (this.viewOnly) {\n      fg.disable();\n      !!data ? fg.patchValue(data, { onlySelf: true, emitEvent: false }) : null;\n    }\n    fg.addControl('tableRowId', this.fb.control(uuid.v4()))\n    console.log('fg: ', fg);\n    this.tableConfig.forEach((ele: TableConfig) => {\n      // fg.valueCha nges\n      if (ele.inputField === 'autocomplete' || ele.isNeedValueChanges) {\n        fg.controls[ele.formControlName].valueChanges.subscribe(searchValue => {\n          this.searchValueChanges.emit({ key: searchValue, config: ele, tableRow: fg.getRawValue() });\n          this.dirtyAutocompleteColumn = { ...ele };\n        });\n      }\n    });\n    return fg;\n  }\n  private _filter(value: string | object, options: Array<Object | string>, key): Array<Object | string> {\n    let filterValue;\n    if (!!value || value === \"\") {\n      return options;\n    }\n    if (typeof value === 'string') {\n      filterValue = value.toLowerCase();\n    }\n    if (typeof value === 'object') {\n      filterValue = value[key].toLowerCase();\n    }\n    return options.filter(option => option[key].toLowerCase().indexOf(filterValue) === 0);\n  }\n\n  submitData() {\n  }\n  addRow(row?: object) {\n    if (this.etFormArray) {\n      this.editableTableForm.controls.table = this.etFormArray;\n      return;\n    }\n    let implementsDetails = this.editableTableForm.controls.table as FormArray\n    implementsDetails.markAllAsTouched();\n    if (implementsDetails.valid) {\n      implementsDetails.push(this.implementsDetailsRow(row));\n    }\n  }\n  resetTable(row?) {\n    let implementsDetails = this.editableTableForm.controls.table as FormArray\n    implementsDetails.clear();\n    implementsDetails.push(this.implementsDetailsRow(row));\n  }\n  deleteRow() {\n    let implementsDetails = this.editableTableForm.controls.table as FormArray;\n    let deleteRecordList = [];\n    let nonSelected = implementsDetails.controls.filter((machinery: FormGroup) => {\n      if (machinery.value.isSelected) {\n        deleteRecordList.push(machinery.getRawValue());\n      }\n      return !machinery.value.isSelected\n    });\n    this.deletedTableRecords.emit(deleteRecordList);\n    implementsDetails.clear()\n    nonSelected.forEach(el => implementsDetails.push(el))\n  }\n\n  private generateAutocompleteDisplayFn(config: TableConfig) {\n    const key = config.patchKey || config.displayKey;\n    const displayWith = (user): string | undefined => {\n      return (user && typeof user === 'object') ? user[key] : user;\n    }\n    // return of(displayWith);\n    this.matAutocompleteDisplayFn.next(displayWith);\n    this._changeDetectorRef.detectChanges();\n  }\n  autocompleteClicked(config: TableConfig, formGroup: FormArray) {\n    this.filteredOptions[config.formControlName] = [];\n    this.generateAutocompleteDisplayFn(config);\n    if (formGroup.controls[config.formControlName].value) {\n      this.searchValueChanges.emit({ key: formGroup.controls[config.formControlName].value, config: config, tableRow: formGroup.getRawValue() });\n      this.dirtyAutocompleteColumn = { ...config };\n    }\n  }\n  valueSelectedFromAutocomplete(event: MatAutocompleteSelectedEvent, rowIndex, rowFormGroup: FormGroup, config: TableConfig) {\n    let option = (event && typeof event.option.value === 'object') ? { ...event.option.value } : event.option.value || '';\n    this.optionSelected.emit({ option, ...{ rowIndex, tableRow: rowFormGroup.getRawValue(), config } });\n  }\n  selectionChanged(event) {\n\n  }\n  contenteditableValuechange(value, rowFormGroup: FormGroup, formControlName) {\n    rowFormGroup.controls[formControlName].patchValue(value);\n  }\n  private setError(ve: ETValidationError) {\n    const formArray = (this.editableTableForm.get('table') as FormArray);\n    const formIndex = formArray.getRawValue().findIndex((formValue) => {\n      if (formValue.tableRowId === ve.tableRowId) {\n        return true;\n      }\n    });\n    const tableRowFG = formArray.at(formIndex);\n    if (tableRowFG) {\n      if (ve.isRemove) {\n        tableRowFG.get(ve.formControlName).setErrors(null);\n        return;\n      }\n      tableRowFG.get(ve.formControlName).setErrors({\n        msg: ve.msg,\n        ...ve.type\n      });\n    }\n  }\n\n  /* ================  NG_VALUE_ACCESSOR && NG_VALIDATORS ===============*/\n  public onTouched: () => void = () => {\n    this.editableTableForm.markAllAsTouched();\n  };\n  writeValue(val: any): void {\n    if (val && val.resetForm) {\n      this.editableTableForm.reset();\n      this.resetTable();\n      return;\n    }\n    val && val.length > 0 && (this.tableData = val);\n  }\n  registerOnChange(fn: any): void {\n    fn && this.editableTableForm.controls.table.valueChanges.pipe(\n      map((value) => (this.editableTableForm.controls.table as FormArray).getRawValue())\n    ).subscribe(fn);\n  }\n  registerOnTouched(fn: any): void {\n    fn && (this.onTouched = fn);\n  }\n  setDisabledState?(isDisabled: boolean): void {\n    isDisabled ? this.editableTableForm.controls.table.disable() : this.editableTableForm.controls.table.enable();\n    // throw new Error(\"Method not implemented.\");\n  }\n  validate(control: AbstractControl): ValidationErrors {\n    return this.editableTableForm.controls.table.valid ? null : { invalidForm: { valid: false, message: \"editableTableForm fields are invalid\" } };\n  }\n  /* ==================================================================== */\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { EditableTableComponent } from './editable-table.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { MatCheckboxModule, MatAutocompleteModule, MatFormFieldModule, MatInputModule, MatIconModule } from '@angular/material';\nimport { MatSelectModule } from '@angular/material/select';\n\n@NgModule({\n  declarations: [EditableTableComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    MatCheckboxModule,\n    MatAutocompleteModule,\n    MatFormFieldModule,\n    MatInputModule,\n    MatIconModule,\n    MatSelectModule\n  ],\n  exports: [EditableTableComponent]\n})\nexport class EditableTableModule { }\n"],"names":["uuid.v4"],"mappings":"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"}