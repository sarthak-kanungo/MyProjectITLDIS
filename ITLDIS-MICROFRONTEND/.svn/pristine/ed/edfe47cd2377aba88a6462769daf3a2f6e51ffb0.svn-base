<div class="container-fluid create-form mb-3 mt-4">
    <div class="card-from">
        <div class="card">
            <div class="card-header">
                <p class="mb-0"> Machine Descripancy Claim</p>
            </div>
            <div class="card-body">
                <form [formGroup]="machineDescripancyClaimForm" [style.fontSize.px]="10">
                    <div class="row">
                        <div class="col-lg-2" *ngIf="displayField">
                            <mat-form-field appearance="outline">
                                <mat-label>Claim No.</mat-label>
                                <input matInput placeholder="Claim No." formControlName="claimNumber">
                            </mat-form-field>
                        </div>
                        <div class="col-lg-2">
                            <mat-form-field appearance="outline" class="w-100">
                                <input matInput [matDatepicker]="picker" placeholder="Claim Date"
                                    formControlName="claimDate">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                            </mat-form-field>
                        </div>
                        <div class="col-lg-2" *ngIf="displayField">
                            <mat-form-field appearance="outline">
                                <mat-label>Claim Status</mat-label>
                                <input matInput placeholder="Claim Status" formControlName="claimStatus">
                            </mat-form-field>
                        </div>
                    </div>

                    <div class="card-from mt-2">
                        <div class="card" style="border: 1px solid #45afaf;">
                            <div class="card-header" style="background-color: #45afaf;
                                border: 1px solid #45afaf;">
                                <p class="mb-0" style="font-size: 13px;">Complaint Details</p>
                            </div>
                            <div class="card-body">
                                <mat-accordion>
                                    <mat-expansion-panel [disabled]="true">
                                        <mat-expansion-panel-header class="border" [style.fontSize.px]="12">
                                            <mat-panel-title class="text-dark">
                                                <div class="d-flex flex-row">
                                                    <div></div>
                                                    <div class="pl-5"><b>Complaint No.</b></div>
                                                </div>
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                <b>Chassis No.</b>
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                <b>Machine Item No.</b>
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                <b>Description</b>
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>
                                    </mat-expansion-panel>
                                </mat-accordion>

                                <mat-accordion *ngFor="let complain of discrepancyComplaints">
                                    <mat-expansion-panel #expand [disabled]="true" [expanded]="isExpanded">
                                        <mat-expansion-panel-header class="border">
                                            <mat-panel-title>
                                                <div class="d-flex flex-row">
                                                    <div *ngIf="isShowCheckbox">
                                                        <mat-checkbox color="basic"
                                                            (change)="onSelectComplaint(selectCheckbox, expand, complain)"
                                                            #selectCheckbox>
                                                        </mat-checkbox>
                                                    </div>
                                                    <div class="pl-2"></div>
                                                    <div class="pl-4 text-dark"><b>{{complain.complaintNumber}}</b></div>
                                                </div>
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                {{complain.chassisNo}}
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                {{complain.itemNo}}
                                            </mat-panel-title>
                                            <mat-panel-title class="text-dark">
                                                {{complain.itemDescription}}
                                            </mat-panel-title>
                                        </mat-expansion-panel-header>

                                        <div class="table-responsive mt-1">
                                            <table class="table table-bordered table-sm">
                                                <thead class="thead-light">
                                                    <tr>
                                                        <th scope="col" style="width: 220px;">Part Item No.</th>
                                                        <th scope="col" style="width: 220px;">Description</th>
                                                        <th scope="col" style="width: 220px;">Complaint Qty.</th>
                                                        <th scope="col" style="width: 220px;" *ngIf="isApprove">Approved Qty.</th>
                                                        <th scope="col" style="width: 80px;">Claim Qty.</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr
                                                        *ngFor="let data of complain.machineDescripancyComplaintDetails">
                                                        <td>{{data.itemNo}}</td>
                                                        <td>{{data.itemDescription}}</td>
                                                        <td>{{data.quantity}}</td>
                                                        <td *ngIf="isApprove">{{data.approvedQuantity}}</td>
                                                        <td>
                                                            <input class="border quantity" type="number" [disabled]="isClaimQtyDisabled"
                                                                (change)="changeClaimQty($event.target, data)" [max]="data.quantity"
                                                                (keypress)="onKeyPressClaimQty($event)"
                                                                [value]="data.claimQuantity ? data.claimQuantity : data.approvedQuantity">
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </mat-expansion-panel>
                                </mat-accordion>

                                <div class="row mt-2">
                                    <div class="col-lg-12">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Remarks</mat-label>
                                            <textarea matInput placeholder="Remarks"
                                                formControlName="remarks"></textarea>
                                        </mat-form-field>
                                    </div>
                                </div>

                                <app-approval-details *ngIf="userType == 'kubota'" [approvalList]="approvalList"></app-approval-details>
                            </div>
                        </div>
                    </div>
                </form>

                <div class=" text-center mt-2 mb-2">
                    <!-- <button type="button" class="btn btn_primary px-3" *ngIf="!isView"
                        (click)="saveAndSubmitForm(true)"> Save
                    </button> -->
                    <button type="button" class="btn btn_primary px-3 ml-3" *ngIf="isCreate"
                        (click)="saveAndSubmitForm(false)"> Submit
                    </button>
                    <!-- <button type="button" class="btn btn_primary px-3" *ngIf="isApprove">Go Back
                    </button> -->
                    <button type="button" class="btn btn_primary px-3 ml-3" *ngIf="isApprove" (click)="approveRejectClaim('Approve')"> Approve
                    </button>
                    <button type="button" class="btn btn_primary px-3 ml-3 " *ngIf="isApprove" (click)="approveRejectClaim('Approve')">Reject
                    </button>
                    <!-- <button type="button" class="btn btn_secondary px-3 ml-3" *ngIf="!isView" disabled> View PDF
                    </button> -->
                    <button type="button" class="btn btn_primary px-3 ml-3" *ngIf="isCreate" (click)=clearRemarks()> Clear
                    </button>
                    <!-- <button type="button" class="btn btn_primary px-3 ml-3" *ngIf="!isView"> Exit
                    </button> -->
                </div>

            </div>
        </div>
    </div>
</div>